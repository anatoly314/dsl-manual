<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>Поиск и индексирование в Lingvo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>

  


<link href="calibreHtmlOutBasicCss.css" type="text/css" rel="stylesheet" />

</head>
<body>

<div class="calibreMeta">
  <div class="calibreMetaTitle">
  
  
    
    <h1>
      <a href="../index.html">Справочник по DSL
</a>
    </h1>
    
    
  
  </div>
  <div class="calibreMetaAuthor">
    Unknown

  </div>
</div>

<div class="calibreMain">

  <div class="calibreEbookContent">
    
      <div class="calibreEbNavTop">
        
          <a href="additional.html" class="calibreAPrev">previous page</a>
        

        
          <a href="var_dicts.html" class="calibreANext"> next page</a>
        
      </div>
    

    
<div id="header" class="calibre7">Справочник по DSL</div>
<div id="main" class="calibre8">
<h1 class="calibre9">Поиск и индексирование в Lingvo</h1>
<p class="calibre13">Поскольку язык DSL разрабатывался специалистами компании ABBYY специально для использования в программе Lingvo, некоторые особености работы программы тесно связаны, а, возможно, и повлияли на его устройство. Одной из таких особенностей является организация поиска слов по тексту словарей и, связанный с этим, процесс индексирования. Эта тема имеет непосредственное отношение к пониманию значений тэгов поисковой обработки <span class="code1">[ex]</span>, <span class="code1">[com]</span>, <span class="code1">[trn]</span> и <span class="code1">[!trs]</span>.</p>
<p class="calibre13">Одним из основных и бесспорных преимуществ электронных словарей в сравнении с бумажными, является возможность быстрого (и по силам приближающегося к мгновенному) поиска по содержимому. Отметим, что речь при этом идёт как правило не об одном словаре, а о десятках, иногда даже о сотнях. И «скорость» при осуществлении данной задачи является фактором ключевым, но не единственным. Рассмотрим, как этот процесс организован в Lingvo.</p>
<p class="calibre13">При подключении к Lingvo нового словаря, программа автоматически запускает процесс индексирования. При этом составляется индекс, т.е., в общих чертах, сжатый полный список, перечень всех слов, входящих в словарь. Очевидно, что благодаря этому достигается скорость поиска по словарю, поскольку долгий анализ всего содержимого словаря выполняется единожды, при построении идекса, и впоследствии при поисковых запросах происходит обращение только к последнему. Индекс записывается в файлы <span class="code_names">*.trs</span> и располагается в пользовательской папке <span class="code_names">..\Application Data\Local\ABBYY\Lingvo\</span>. При добавлении каждого нового словаря индекс пополняется и, соответственно, растёт размер его файлов. Ясно, что для того, чтобы размер не увеличивался напрасно, в индекс, при его создании, должны включаться только полезные данные, а бесполезные должны исключаться. Регулирование этого процесса организовано уже на уровне языка DSL.</p>
<p class="calibre13">При помощи некоторых тэгов в DSL размечаются зоны, которые обрабатываются или игнорируются программой при составлении индекса. По отношению к индексу эти тэги делятся на включающие и исключающие.</p>
<p class="calibre13"><strong class="calibre4">Исключающими</strong> являются тэги: прежде всего <span class="code1">[!trs]</span>, и затем <span class="code1">[p]</span>, <span class="code1">[ref]</span>, <span class="code1">&lt;&lt;···&gt;&gt;</span>, <span class="code1">[url]</span>, <span class="code1">[s]</span>, <span class="code1">[video]</span>. <em class="calibre16">Из перечисленных только у первого <span class="code1">[!trs]</span> исключение из индекса является основной и единственной функцией, а у остальных основные функции другие и с индексом не связаны.</em></p>
<p class="calibre13"><strong class="calibre4">Включающими</strong> являются тэги: <span class="code1">[trn]</span>, <span class="code1">[ex]</span> и <span class="code1">[com]</span>. Кроме того в индекс в обязательном порядке попадают все словарные заголовки.</p>
<p class="calibre13">Принцип влияния упомянутых тэгов на операцию индексирования рассмотрим на простом примере. Создадим тестовый словарик из одной карточки:</p>
<p class="calibre2"><img src="index_dsl.png" class="calibre3"/></p>
<p class="calibre13">В примере видим, что часть текста находится в зоне действия включающих тэгов <span class="code1">[trn]</span>, <span class="code1">[ex]</span> и <span class="code1">[com]</span> – этот текст должен быть включен в состав индекса. Один фрагмент находится за пределами включающего тэга <span class="code1">[trn]</span>, а другой обрамлен исключающим тэгом <span class="code1">[!trs]</span> – этот текст в индекс попасть не должен. Теперь проверим так ли это на практике. Делаем поисковый запрос по слову «гвоздь».</p>
<p class="calibre2"><img src="index_g.png" class="calibre3"/></p>
<p class="calibre13">Как видим, результаты поиска распределены по категориям: заголовки, переводы, примеры и комментарии. Эти категории определяются включающими тэгами: <span class="code1">[trn]</span> – для переводов, <span class="code1">[ex]</span> – для примеров, <span class="code1">[com]</span> – для комментариев, а заголовки индексируются без дополнительной разметки. Искомое слово найдено во всех четырёх категориях – и в исходном DSL мы видим, что, действительно, это слово находится в области действия всех включающих тэгов. Теперь поищем слово «фуражка».</p>
<p class="calibre2"><img src="index_f.png" class="calibre3"/></p>
<p class="calibre13">Как видим, слово нашлось только в категории примеров. Всё правильно: в заголовках его нет, в зону переводов <span class="code1">[trn]</span> оно не попало, а из зоны комментариев <span class="code1">[com]</span> мы его исключили при помощи тэга <span class="code1">[!trs]</span>.</p>
<p class="calibre13">Итак, пример наглядно продемонстрировал нам следующее:</p>
<ol class="calibre17">
<li class="calibre18">В состав индекса включаются заголовки и текст, находящийся в зоне действия включающих тэгов.</li>
<li class="calibre18">Каждый из включающих тэгов образует отдельную категорию в индексе.</li>
<li class="calibre18">В состав индекса не попадает текст, находящийся за пределами зоны действия включающих тэгов, а также текст, занесённый в зону действия исключающих тэгов.</li>
<li class="calibre18">Механизм поиска в программе находит только те слова, которые попали в состав индекса.</li>
</ol>
<p class="calibre13">При помощи внимательной разметки текста тэгами мы добились того, что в индекс вошли только полезные данные, следовательно его объём стал максимально экономичным, а состав – максимально эффективным. Однако такая подготовка DSL словаря к использованию требует от составителя определённых технических навыков, поскольку нужно самостоятельно размечать тэгами текст, размер которого может быть далеко не маленьким. Причём, та часть текста, которая по какой-либо причине окажется неразмеченной, станет недоступна при поиске в программе. Эта задача по силам не всем пользователям. Для таких случаев в Lingvo предусмотрен другой способ разметки DSL для индексирования – <strong class="calibre4">автоматический</strong>. Как это происходит, мы рассмотрим на другом примере.</p>
<p class="calibre13">Создадим тестовый словарик, аналогичный предыдущему по строению, но, для наглядности, на английском языке.</p>
<p class="calibre2"><img src="index_en.png" class="calibre3"/></p>
<p class="calibre13">Теперь отконвертируем этот словарик в формат LSD при помощи Компилятора DSL, предварительно включив опцию компилятора «Автоматически добавлять разметку, необходимую для поиска по содержимому карточек словаря». Полученный LSD откроем в hex-редакторе и посмотрим, что внутри.</p>
<p class="calibre2"><img src="index_hex.png" class="calibre3"/></p>
<p class="calibre13">Как видим, в начале и в конце статьи появились дескрипторы нового тэга, которого не было в исходном DSL (на снимке подчёркнуто пурпурными линиями). Это <span class="code1">[trn1]···[/trn1]</span> – недокументированный тэг, добавляемый компилятором при обработке словаря. Подобно своему родственнику <span class="code1">[trn]</span>, он создаёт категорию переводов и включает в неё содержимое всей статьи от начала до конца. Таким образом для поиска в программе становится доступным полный текст всего словаря, кроме отрывков, попавших в исключающие тэги. Этот способ менее экономичен и аккуратен по сравнению с предыдущим, но зато не требует от составителя пользовательского словаря специальных технических знаний и навыков.</p>
</div>
<div id="footer" class="calibre14">
<p class="calibre15">Справочник по DSL • Версия 0.9.3 beta • 22.09.2015</p>
<p class="calibre15">Copyleft (ɔ) 2015 yozhic. Свободный контент. Все права открыты и неограничены. Никаких гарантий и ответственности.</p>
</div>



  </div>

  
  <div class="calibreToc">
        <h2><a href="../index.html"> Table of contents</a></h2>
        <div>
            <ul>
                <li>
                    <a href="index.html">Титульный лист</a>
                </li>
                <li>
                    <a href="preface.html">Предисловие</a>
                    <ul>
                        <li>
                            <a href="preface.html#author">От составителя</a>
                        </li>
                        <li>
                            <a href="preface.html#terms">Особенности терминологии</a>
                        </li>
                        <li>
                            <a href="preface.html#legend">Условные обозначения</a>
                        </li>
                        <li>
                            <a href="preface.html#thanks">Благодарности</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="dsl.html">Что такое DSL</a>
                    <ul>
                        <li>
                            <a href="dsl.html#lang">О языке DSL</a>
                        </li>
                        <li>
                            <a href="dsl.html#format">О формате DSL</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="create.html">О создании словарей DSL</a>
                    <ul>
                        <li>
                            <a href="create.html#easy">Простой словарь DSL</a>
                        </li>
                        <li>
                            <a href="create.html#cool">Структурированный словарь DSL
                                с форматированием</a>
                        </li>
                        <li>
                            <a href="create.html#tools">Рекомендуемые инструменты</a>
                        </li>
                        <li>
                            <a href="create.html#books">Рекомендуемая литература</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="dict.html">Строение словаря DSL</a>
                    <ul>
                        <li>
                            <a href="dict.html#main">Общие сведения</a>
                        </li>
                        <li>
                            <a href="dict.html#names">Наименование файлов словаря</a>
                        </li>
                        <li>
                            <a href="dict.html#dsl">Файл основного текста</a>
                        </li>
                        <li>
                            <a href="dict.html#ann">Файл аннотации</a>
                        </li>
                        <li>
                            <a href="dict.html#bmp">Иконка</a>
                        </li>
                        <li>
                            <a href="dict.html#abrv">Файл аббревиатур</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="entry.html">Структура словарной статьи</a>
                    <ul>
                        <li>
                            <a href="entry.html#article">Словарная статья</a>
                        </li>
                        <li>
                            <a href="entry.html#headword">Заголовок статьи</a>
                        </li>
                        <li>
                            <a href="entry.html#body">Тело статьи</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="tag_list.html">Тэги DSL</a>
                    <ul>
                        <li>
                            <a href="tag_system.html">О тэгах DSL</a>
                            <ul>
                                <li>
                                    <a href="tag_system.html#main">Устройство тегов</a>
                                </li>
                                <li>
                                    <a href="tag_system.html#meta_lit">Метасимволы и
                                        литералы</a>
                                </li>
                                <li>
                                    <a href="tag_system.html#comments">Общие замечания</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="tag_list.html">Перечень тэгов и команд DSL</a>
                        </li>
                        <li>
                            <a href="tag_format.html">Тэги форматирования текста</a>
                            <ul>
                                <li>
                                    <a href="tag_format.html#b">Тэг B</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#i">Тэг I</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#u">Тэг U</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#c">Тэг C</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#sup">Тэг SUP</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#sub">Тэг SUB</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#m">Тэг M</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#str">Тэг ударения</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#br">Тэг BR</a>
                                </li>
                                <li>
                                    <a href="tag_format.html#circ">Команда ^</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="tag_struct.html">Тэги словарной структуры</a>
                            <ul>
                                <li>
                                    <a href="tag_struct.html#p">Тэг P</a>
                                </li>
                                <li>
                                    <a href="tag_struct.html#t">Тэг T</a>
                                </li>
                                <li>
                                    <a href="tag_struct.html#ast">Тэг *</a>
                                </li>
                                <li>
                                    <a href="tag_struct.html#at">Команда @</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="tag_handling.html">Тэги поисковой обработки</a>
                            <ul>
                                <li>
                                    <a href="tag_handling.html#ex">Тэг EX</a>
                                </li>
                                <li>
                                    <a href="tag_handling.html#com">Тэг COM</a>
                                </li>
                                <li>
                                    <a href="tag_handling.html#trn">Тэг TRN</a>
                                </li>
                                <li>
                                    <a href="tag_handling.html#trn1">Тэг TRN1</a>
                                </li>
                                <li>
                                    <a href="tag_handling.html#trs">Тэг !TRS</a>
                                </li>
                                <li>
                                    <a href="tag_handling.html#lang">Тэг LANG</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="tag_mm.html">Тэги мультимедиа</a>
                            <ul>
                                <li>
                                    <a href="tag_mm.html#s">Тэг S</a>
                                    <ul>
                                        <li>
                                            <a href="tag_mm.html#images">Изображения</a>
                                        </li>
                                        <li>
                                            <a href="tag_mm.html#sound">Звук</a>
                                        </li>
                                        <li>
                                            <a href="tag_mm.html#movie">Видео</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="tag_mm.html#video">Тэг VIDEO</a>
                                </li>
                                <li>
                                    <a href="tag_mm.html#preview">Тэг PREVIEW</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="tag_links.html">Ссылки</a>
                            <ul>
                                <li>
                                    <a href="tag_links.html#main">Общие сведения</a>
                                </li>
                                <li>
                                    <a href="tag_links.html#ref1">Тэг &lt;&lt; &gt;&gt;</a>
                                </li>
                                <li>
                                    <a href="tag_links.html#ref2">Тэг REF</a>
                                </li>
                                <li>
                                    <a href="tag_links.html#url">Тэг URL</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="tag_service.html">Служебные тэги и команды</a>
                            <ul>
                                <li>
                                    <a href="tag_service.html#comm">Тэг {{ }}</a>
                                </li>
                                <li>
                                    <a href="tag_service.html#alt">Команда ( )</a>
                                </li>
                                <li>
                                    <a href="tag_service.html#unsort">Команда { }</a>
                                </li>
                                <li>
                                    <a href="tag_service.html#tilde">Команда ~</a>
                                </li>
                                <li>
                                    <a href="tag_service.html#backslash">Команда \</a>
                                </li>
                                <li>
                                    <a href="tag_service.html#number">Команда #</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="directives.html">Директивы предварительной
                                обработки</a>
                            <ul>
                                <li>
                                    <a href="directives.html#main">Общее описание</a>
                                </li>
                                <li>
                                    <a href="directives.html#name">Директива #NAME</a>
                                </li>
                                <li>
                                    <a href="directives.html#index">Директива
                                        #INDEX_LANGUAGE</a>
                                </li>
                                <li>
                                    <a href="directives.html#contents">Директива
                                        #CONTENTS_LANGUAGE</a>
                                </li>
                                <li>
                                    <a href="directives.html#source">Директива
                                        #SOURCE_CODE_PAGE</a>
                                </li>
                                <li>
                                    <a href="directives.html#include">Директива
                                        #INCLUDE</a>
                                </li>
                                <li>
                                    <a href="directives.html#icon">Директива #ICON_FILE</a>
                                </li>
                                <li>
                                    <a href="directives.html#lang">Директива
                                        #LANGUAGE</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="dsl_comp.html">Компиляция и компилятор DSL</a>
                    <ul>
                        <li>
                            <a href="dsl_comp.html#main">Общие сведения</a>
                        </li>
                        <li>
                            <a href="dsl_comp.html#gui">Графический интерфейс
                                пользователя</a>
                        </li>
                        <li>
                            <a href="dsl_comp.html#cmd">Командная строка</a>
                        </li>
                        <li>
                            <a href="dsl_comp.html#syntax">Отчёт об ошибках</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="colors.html">Цветовая палитра DSL</a>
                    <ul>
                        <li>
                            <a href="colors.html#colors_hue">Сортировка по группам
                                оттенков</a>
                        </li>
                        <li>
                            <a href="colors.html#colors_gamma1">Сортировка по цветовой
                                гамме (первый способ)</a>
                        </li>
                        <li>
                            <a href="colors.html#colors_gamma2">Сортировка по цветовой
                                гамме (второй способ)</a>
                        </li>
                        <li>
                            <a href="colors.html#colors_abc">Сортировка по
                                алфавиту</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="langs.html">Списки языков</a>
                    <ul>
                        <li>
                            <a href="langs.html#supported">Языки, поддерживаемые
                                Lingvo</a>
                        </li>
                        <li>
                            <a href="langs.html#iso">Коды наименований языков</a>
                        </li>
                        <li>
                            <a href="langs.html#lcid">Коды локалей Microsoft</a>
                        </li>
                        <li>
                            <a href="langs.html#ansi">Кодовые страницы ANSI в
                                Windows</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="additional.html">Сопутствующие сведения</a>
                    <ul>
                        <li>
                            <a href="search.html">Поиск и индексирование в Lingvo</a>
                        </li>
                        <li>
                            <a href="var_dicts.html">Виды файлов словарей в Lingvo</a>
                        </li>
                        <li>
                            <a href="spaces.html">Об использовании нестандартных
                                пробелов</a>
                        </li>
                        <li>
                            <a href="lexicography.html">Немного о лексикографии</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="history.html">Из истории Lingvo</a>
                    <ul>
                        <li>
                            <a href="history.html#table">Сводная таблица по истории
                                развития синтаксиса языка DSL</a>
                        </li>
                        <li>
                            <a href="lingvo4.html">Lingvo 4.0</a>
                        </li>
                        <li>
                            <a href="lingvo5.html">Lingvo 5.0</a>
                        </li>
                        <li>
                            <a href="lingvo6.html">Lingvo 6.0</a>
                        </li>
                        <li>
                            <a href="lingvo6_5.html">Lingvo 6.5</a>
                        </li>
                        <li>
                            <a href="lingvo7.html">Lingvo 7.0</a>
                        </li>
                        <li>
                            <a href="lingvo8.html">Lingvo 8.0</a>
                        </li>
                        <li>
                            <a href="lingvo9.html">Lingvo 9.0</a>
                        </li>
                        <li>
                            <a href="lingvo10.html">Lingvo 10.0</a>
                        </li>
                        <li>
                            <a href="lingvo11.html">Lingvo 11.0</a>
                        </li>
                        <li>
                            <a href="lingvo12.html">Lingvo 12.0</a>
                        </li>
                        <li>
                            <a href="lingvo14.html">Lingvo x3 (14.0)</a>
                        </li>
                        <li>
                            <a href="lingvo15.html">Lingvo x5 (15.0)</a>
                        </li>
                        <li>
                            <a href="lingvo16.html">Lingvo x6 (16.0)</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>


    </div>
  

  <div class="calibreEbNav">
    
      <a href="additional.html" class="calibreAPrev">previous page</a>
    

    <a href="../index.html" class="calibreAHome"> start</a>

    
      <a href="var_dicts.html" class="calibreANext"> next page</a>
    
  </div>

</div>

</body>
</html>
